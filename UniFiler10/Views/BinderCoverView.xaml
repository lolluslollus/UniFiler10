<ctl:OpenableObservableControl
    x:Class="UniFiler10.Views.BinderCoverView"
    x:Name="me"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:UniFiler10.Views"
    xmlns:ctl="using:UniFiler10.Controlz"
    xmlns:utilz="using:Utilz"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300"
    d:DesignWidth="400"
    DataContextChanged="OnDataContextChanged">

    <ScrollViewer>
        <Grid Background="Violet" x:Name="LayoutRoot" DataContext="{x:Bind VM, Mode=OneWay}">
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition/>
                <RowDefinition/>
                <RowDefinition/>
            </Grid.RowDefinitions>

            <TextBlock FontSize="40" Text="BinderCoverView" VerticalAlignment="Center" HorizontalAlignment="Center"/>

            <ToggleButton Grid.Row="1" 
                Tapped="OnAll_Tapped"
                IsChecked="{Binding IsAllFoldersPaneOpen, Mode=TwoWay}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>

                    <SymbolIcon Symbol="Download" Visibility="{Binding IsAllFoldersPaneOpen, Converter={StaticResource BooleanToCollapsedConverter}}"/>
                    <SymbolIcon Symbol="Up" Visibility="{Binding IsAllFoldersPaneOpen, Converter={StaticResource BooleanToVisibleConverter}}"/>
                    <TextBlock Grid.Column="1" x:Uid="AllFolders"/>
                </Grid>
            </ToggleButton>

            <ctl:TolerantListView Grid.Row="2"
            ItemsSource="{Binding AllFolderPreviews}"
            Visibility="{Binding IsAllFoldersPaneOpen, Converter={StaticResource BooleanToVisibleConverter}}"
            IsItemClickEnabled="True"
            IsMultiSelectCheckBoxEnabled="False"
            ItemClick="OnAllFolderPreviews_ItemClick">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <ItemsWrapGrid Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Grid Tapped="OnFolderPreview_Tapped" Background="Transparent">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="{StaticResource MiniatureHeight_ForGrid}"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="{StaticResource MiniatureWidth_ForGrid}"/>
                            </Grid.ColumnDefinitions>

                            <Viewbox Canvas.ZIndex="200"
                                Stretch="Uniform" StretchDirection="Both"
                                VerticalAlignment="Top" HorizontalAlignment="Center"
                                MaxHeight="{StaticResource MiniatureQuarterHeight}">
                                <TextBlock Canvas.ZIndex="200"
                                    Text="{Binding Name}"
                                    Foreground="{StaticResource FlashyForeground}" 
                                    TextWrapping="Wrap"
                                    MaxWidth="{StaticResource MiniatureWidth}"/>
                            </Viewbox>

                            <local:DocumentView Canvas.ZIndex="100"
                                IsDeleteEnabled="False"
                                IsRedirectTapped="True"
                                DataContext="{Binding Document, Mode=OneWay}"/>
                        </Grid>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ctl:TolerantListView>

            <Button Grid.Row="3" Tapped="OnBackButton_Tapped" HorizontalAlignment="Right" VerticalAlignment="Bottom">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>

                    <SymbolIcon Symbol="Back"/>
                    <TextBlock Grid.Column="1" x:Uid="Back"/>
                </Grid>
            </Button>
        </Grid>
    </ScrollViewer>
</ctl:OpenableObservableControl>
