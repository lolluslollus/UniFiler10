<ctl:OpenableObservableControl    
	x:Class="UniFiler10.Views.BinderCoverView"
    x:Name="me"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:UniFiler10.Views"
    xmlns:ctl="using:UniFiler10.Controlz"
    xmlns:utilz="using:Utilz"
	xmlns:vms="using:UniFiler10.ViewModels"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="800"
    d:DesignWidth="400"
    d:DataContext="{d:DesignInstance Type=vms:BinderCoverVM, IsDesignTimeCreatable=False}"
	DataContextChanged="OnDataContextChanged"
    IsEnabled="{Binding IsEnabled}">

	<ctl:OpenableObservableControl.Resources>
		<Storyboard x:Name="UpdatingStoryboard" RepeatBehavior="Forever" >
			<ObjectAnimationUsingKeyFrames 
                Storyboard.TargetName="RefreshIcon" 
                Storyboard.TargetProperty="Visibility">
				<DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="Visible"/>
			</ObjectAnimationUsingKeyFrames>

			<DoubleAnimationUsingKeyFrames 
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)" 
                Storyboard.TargetName="RefreshIcon">
				<LinearDoubleKeyFrame KeyTime="0" Value="0"/>
				<LinearDoubleKeyFrame KeyTime="0:0:0.1" Value="90"/>
				<LinearDoubleKeyFrame KeyTime="0:0:0.2" Value="180"/>
				<LinearDoubleKeyFrame KeyTime="0:0:0.3" Value="270"/>
			</DoubleAnimationUsingKeyFrames>

			<!--<DoubleAnimationUsingKeyFrames 
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" 
                Storyboard.TargetName="RefreshIcon">
                <LinearDoubleKeyFrame KeyTime="0:0:0.3" Value="1"/>
                <LinearDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames 
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)" 
                Storyboard.TargetName="RefreshIcon">
                <LinearDoubleKeyFrame KeyTime="0:0:0.3" Value="1"/>
                <LinearDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
            </DoubleAnimationUsingKeyFrames>-->

			<!--<ObjectAnimationUsingKeyFrames 
                Storyboard.TargetName="RefreshIcon" 
                Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0:0:0.5" Value="Collapsed"/>
            </ObjectAnimationUsingKeyFrames>-->
			<!--<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="RefreshIcon">
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="-10"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="RefreshIcon">
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="-10"/>
            </DoubleAnimationUsingKeyFrames>-->
		</Storyboard>

		<ItemsPanelTemplate x:Key="FolderItemPanel">
			<ItemsWrapGrid Orientation="Horizontal"/>
		</ItemsPanelTemplate>

		<DataTemplate x:Key="FolderItemTemplate">
			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition Height="{StaticResource MiniatureHeight_ForGrid}"/>
				</Grid.RowDefinitions>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="{StaticResource MiniatureWidth_ForGrid}"/>
				</Grid.ColumnDefinitions>

				<Viewbox Canvas.ZIndex="200"
        			Stretch="Uniform" StretchDirection="DownOnly"
        			VerticalAlignment="Bottom" HorizontalAlignment="Center"
        			MaxHeight="{StaticResource MiniatureQuarterHeight}">
					<TextBlock
        				Text="{Binding FolderName}"
        				Foreground="{StaticResource FlashyForeground}" 
        				HorizontalAlignment="Stretch"
        				TextWrapping="Wrap"
        				MaxWidth="{StaticResource MiniatureWidth}"/>
				</Viewbox>

				<local:DocumentView Canvas.ZIndex="100"
        			IsDeleteEnabled="False"
        			DataContext="{Binding Document, Mode=OneWay}"/>
			</Grid>
		</DataTemplate>
	</ctl:OpenableObservableControl.Resources>

	<ScrollViewer>
		<Grid Background="LavenderBlush" x:Name="LayoutRoot" DataContext="{x:Bind VM, Mode=OneWay}">
			<Grid.RowDefinitions>
				<RowDefinition/>
				<RowDefinition/>
				<RowDefinition/>
				<RowDefinition/>
				<RowDefinition/>
				<RowDefinition/>
				<RowDefinition/>
			</Grid.RowDefinitions>

			<!-- animation for refresh -->
			<Viewbox
                Width="{StaticResource LandscapeItemHeight}"
                Height="{StaticResource LandscapeItemHeight}"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Stretch="Uniform">
				<SymbolIcon x:Name="RefreshIcon" 
                        Symbol="Sync"
                        RenderTransformOrigin=".5, .5" 
                        Visibility="Collapsed"
                        Foreground="{StaticResource DiagonalNESWBrush}"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Margin="{StaticResource ButtonPadding}">
					<SymbolIcon.RenderTransform>
						<CompositeTransform Rotation="0"/>
					</SymbolIcon.RenderTransform>
				</SymbolIcon>
			</Viewbox>

			<!-- actions for all folders -->
			<VariableSizedWrapGrid Grid.Row="0"
                Orientation="Horizontal"
                Background="{Binding ElementName=AddButton, Path=Background, Mode=OneWay}"
                HorizontalAlignment="Stretch">

				<Button 
                    Tapped="OnAddFolder_Tapped"
                    Width="{StaticResource LandscapeLargeItemWidth}"
                    Style="{StaticResource ButtonLolloStyle}">
					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="{StaticResource LandscapeItemHeight_ForGrid}"/>
							<ColumnDefinition Width="{StaticResource GridSize4Placeholder_Medium}"/>
							<ColumnDefinition/>
						</Grid.ColumnDefinitions>

						<SymbolIcon Symbol="Add"/>
						<TextBlock Grid.Column="2" x:Uid="AddFolderT" TextWrapping="Wrap" HorizontalAlignment="Left"/>
					</Grid>
				</Button>

				<Button 
                    Tapped="OnAddOpenFolder_Tapped"
                    Width="{StaticResource LandscapeLargeItemWidth}"
                    Style="{StaticResource ButtonLolloStyle}">
					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="{StaticResource LandscapeItemHeight_ForGrid}"/>
							<ColumnDefinition Width="{StaticResource GridSize4Placeholder_Medium}"/>
							<ColumnDefinition/>
						</Grid.ColumnDefinitions>

						<SymbolIcon Symbol="NewFolder"/>
						<TextBlock Grid.Column="2" x:Uid="AddOpenFolderT" TextWrapping="Wrap" HorizontalAlignment="Left"/>
					</Grid>
				</Button>

				<Button 
                    Tapped="OnBackButton_Tapped"
                    Width="{StaticResource LandscapeLargeItemWidth}"
                    Style="{StaticResource ButtonLolloStyle}">
					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="{StaticResource LandscapeItemHeight_ForGrid}"/>
							<ColumnDefinition Width="{StaticResource GridSize4Placeholder_Medium}"/>
							<ColumnDefinition/>
						</Grid.ColumnDefinitions>

						<SymbolIcon Symbol="Back"/>
						<TextBlock Grid.Column="2" x:Uid="Back" TextWrapping="Wrap" HorizontalAlignment="Left"/>
					</Grid>
				</Button>

			</VariableSizedWrapGrid>

			<!-- recent folders header -->
			<Grid Grid.Row="1">
				<ToggleButton 
                    IsChecked="{Binding IsRecentFoldersPaneOpen, Mode=TwoWay}"
                    Style="{StaticResource ToggleButtonLolloStyle}">

					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="Auto"/>
							<ColumnDefinition Width="{StaticResource GridSize4Placeholder_Medium}"/>
							<ColumnDefinition/>
						</Grid.ColumnDefinitions>

						<SymbolIcon 
                            Symbol="View"
							Width="{StaticResource LandscapeItemHeight}"
							Height="{StaticResource LandscapeItemHeight}"
                            Visibility="{Binding IsRecentFoldersPaneOpen, Converter={StaticResource BooleanToCollapsedConverter}}"/>
						<SymbolIcon 
                            Symbol="Up" 
							Width="{StaticResource LandscapeItemHeight}"
							Height="{StaticResource LandscapeItemHeight}"
                            Visibility="{Binding IsRecentFoldersPaneOpen, Converter={StaticResource BooleanToVisibleConverter}}"/>
						<TextBlock Grid.Column="2" 
                            x:Uid="RecentFolders" 
							MaxWidth="{StaticResource LandscapeItemHeight}"
                            TextWrapping="Wrap"
                            HorizontalAlignment="Left"
							VerticalAlignment="Center"/>
					</Grid>
				</ToggleButton>
			</Grid>

			<!-- recent folders grid -->
			<ctl:TolerantListView Grid.Row="2"
                ItemsSource="{Binding RecentFolderPreviews}"
                Visibility="{Binding IsRecentFoldersPaneOpen, Converter={StaticResource BooleanToVisibleConverter}}"
                IsItemClickEnabled="True"
                IsMultiSelectCheckBoxEnabled="False"
                ItemClick="OnFolderPreviews_ItemClick"
                ScrollViewer.VerticalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollMode="Disabled"
				ItemTemplate="{StaticResource FolderItemTemplate}"
				ItemsPanel="{StaticResource FolderItemPanel}"/>

			<!-- all folders header -->
			<Grid Grid.Row="3">
				<ToggleButton 
                    IsChecked="{Binding IsAllFoldersPaneOpen, Mode=TwoWay}"
                    Style="{StaticResource ToggleButtonLolloStyle}">

					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="Auto"/>
							<ColumnDefinition Width="{StaticResource GridSize4Placeholder_Medium}"/>
							<ColumnDefinition/>
						</Grid.ColumnDefinitions>

						<SymbolIcon 
                            Symbol="View"
							Width="{StaticResource LandscapeItemHeight}"
							Height="{StaticResource LandscapeItemHeight}"							
                            Visibility="{Binding IsAllFoldersPaneOpen, Converter={StaticResource BooleanToCollapsedConverter}}"/>
						<SymbolIcon 
                            Symbol="Up"
							Width="{StaticResource LandscapeItemHeight}"
							Height="{StaticResource LandscapeItemHeight}"							
                            Visibility="{Binding IsAllFoldersPaneOpen, Converter={StaticResource BooleanToVisibleConverter}}"/>
						<TextBlock Grid.Column="2" 
                            x:Uid="AllFolders" 
							MaxWidth="{StaticResource LandscapeItemHeight}"
                            TextWrapping="Wrap"
                            HorizontalAlignment="Left"
							VerticalAlignment="Center"/>
					</Grid>
				</ToggleButton>
				<!--<Button Tapped="OnAllRefresh_Tapped"
                    Width="{StaticResource LandscapeItemWidth}"
                    Height="{StaticResource LandscapeItemHeight}"                        
                    Padding="{StaticResource ButtonPadding}"
                    Visibility="{Binding IsAllFoldersPaneOpen, Converter={StaticResource BooleanToVisibleConverter}}">
                    -->
				<!-- was Symbol="Refresh" -->
				<!--
                    <SymbolIcon Symbol="Sync"/>
                </Button>-->
			</Grid>

			<!-- all folders grid-->
			<ctl:TolerantListView Grid.Row="4"
                ItemsSource="{Binding AllFolderPreviews}"
                Visibility="{Binding IsAllFoldersPaneOpen, Converter={StaticResource BooleanToVisibleConverter}}"
                IsItemClickEnabled="True"
                IsMultiSelectCheckBoxEnabled="False"
                ItemClick="OnFolderPreviews_ItemClick"
                ScrollViewer.VerticalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollMode="Disabled"
				ItemTemplate="{StaticResource FolderItemTemplate}" 
				ItemsPanel="{StaticResource FolderItemPanel}"/>

			<!-- folders by category header -->
			<Grid Grid.Row="5">
				<ToggleButton 
                    IsChecked="{Binding IsByCatFoldersPaneOpen, Mode=TwoWay}"
                    Style="{StaticResource ToggleButtonLolloStyle}">

					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="Auto"/>
							<ColumnDefinition Width="{StaticResource GridSize4Placeholder_Medium}"/>
							<ColumnDefinition Width="Auto"/>
							<ColumnDefinition Width="{StaticResource GridSize4Placeholder_Medium}"/>
							<ColumnDefinition/>
						</Grid.ColumnDefinitions>
						<!--<Grid.RowDefinitions>
							<RowDefinition/>
							<RowDefinition/>
						</Grid.RowDefinitions>-->

						<Grid>
							<SymbolIcon 
								Symbol="View" 
								Width="{StaticResource LandscapeItemHeight}"
								Height="{StaticResource LandscapeItemHeight}"
								Visibility="{Binding IsByCatFoldersPaneOpen, Converter={StaticResource BooleanToCollapsedConverter}}"/>
							<SymbolIcon 
								Symbol="Up"
								Width="{StaticResource LandscapeItemHeight}"
								Height="{StaticResource LandscapeItemHeight}"
								Visibility="{Binding IsByCatFoldersPaneOpen, Converter={StaticResource BooleanToVisibleConverter}}"/>
						</Grid>
						<TextBlock Grid.Column="2" 
							MaxWidth="{StaticResource LandscapeItemWidth}"
                            x:Uid="ByCatFolders" 
                            TextWrapping="Wrap"
							HorizontalAlignment="Left"
							VerticalAlignment="Center"/>

						<!--VerticalAlignment="Center"-->
						<ctl:LolloTextBox Grid.Column="4"
							BorderThickness="0"
							Width="{StaticResource LandscapeItemWidth}"
							Height="{StaticResource LandscapeItemHeight}"
							
							VerticalContentAlignment="Center"
							ItemsSource="{Binding MetaBriefcase.Categories, Mode=OneWay}"
							Style="{StaticResource LolloTextBoxFieldValueStyle}"
							IsReadOnly="True"
							IsEmptyValueAllowedEvenIfNotInList="False"
							TextWrapping="Wrap"
							PlaceholderText="..."
							DisplayMemberPath="Name"
							Text="{Binding CatNameForFilter, Mode=TwoWay}">
							<ctl:LolloTextBox.ListItemTemplate>
								<DataTemplate >
									<TextBlock Text="{Binding Name}"
										MaxWidth="{StaticResource LandscapeThreeQuartersItemWidth}"
										TextWrapping="Wrap"/>
								</DataTemplate>
							</ctl:LolloTextBox.ListItemTemplate>
						</ctl:LolloTextBox>
					</Grid>
				</ToggleButton>
			</Grid>

			<!-- folders by category grid -->
			<ctl:TolerantListView Grid.Row="6"
                ItemsSource="{Binding ByCatFolderPreviews}"
                Visibility="{Binding IsByCatFoldersPaneOpen, Converter={StaticResource BooleanToVisibleConverter}}"
                IsItemClickEnabled="True"
                IsMultiSelectCheckBoxEnabled="False"
                ItemClick="OnFolderPreviews_ItemClick"
                ScrollViewer.VerticalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollMode="Disabled"
				ItemTemplate="{StaticResource FolderItemTemplate}"
				ItemsPanel="{StaticResource FolderItemPanel}"/>

		</Grid>
	</ScrollViewer>
</ctl:OpenableObservableControl>
