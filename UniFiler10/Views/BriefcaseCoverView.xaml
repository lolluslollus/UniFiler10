<ctl:ObservableControl    
	x:Class="UniFiler10.Views.BriefcaseCoverView"
    x:Name="me"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:UniFiler10.Views"
    xmlns:ctl="using:UniFiler10.Controlz"
    xmlns:utilz="using:Utilz"
	xmlns:vms="using:UniFiler10.ViewModels"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="500"
    d:DesignWidth="300"
	d:DataContext="{d:DesignInstance Type=vms:BriefcaseVM, IsDesignTimeCreatable=False}">

	<ctl:ObservableControl.Resources>
		<Storyboard x:Name="UpdatingStoryboard" RepeatBehavior="Forever" >
			<ObjectAnimationUsingKeyFrames 
                Storyboard.TargetName="RefreshIcon" 
                Storyboard.TargetProperty="Visibility">
				<DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="Visible"/>
			</ObjectAnimationUsingKeyFrames>

			<DoubleAnimationUsingKeyFrames 
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)" 
                Storyboard.TargetName="RefreshIcon">
				<LinearDoubleKeyFrame KeyTime="0" Value="0"/>
				<LinearDoubleKeyFrame KeyTime="0:0:0.1" Value="90"/>
				<LinearDoubleKeyFrame KeyTime="0:0:0.2" Value="180"/>
				<LinearDoubleKeyFrame KeyTime="0:0:0.3" Value="270"/>
			</DoubleAnimationUsingKeyFrames>
		</Storyboard>
	</ctl:ObservableControl.Resources>

	<ScrollViewer>
		<Grid Background="Lavender" x:Name="LayoutRoot" DataContext="{x:Bind VM, Mode=OneWay}">
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="Auto"/>
				<RowDefinition/>
			</Grid.RowDefinitions>

			<Viewbox
                    Width="{StaticResource LandscapeItemHeight}"
                    Height="{StaticResource LandscapeItemHeight}"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    Stretch="Uniform">
				<SymbolIcon x:Name="RefreshIcon" 
                            Symbol="Sync"
                            RenderTransformOrigin=".5, .5" 
                            Visibility="Collapsed"
                            Foreground="{StaticResource DiagonalNESWBrush}"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Margin="{StaticResource ButtonPadding}">
					<SymbolIcon.RenderTransform>
						<CompositeTransform Rotation="0"/>
					</SymbolIcon.RenderTransform>
				</SymbolIcon>
			</Viewbox>

			<!-- actions for all binders -->
			<VariableSizedWrapGrid Grid.Row="0"
                Orientation="Horizontal"
                Background="{Binding ElementName=AddButton, Path=Background, Mode=OneWay}"
                HorizontalAlignment="Stretch">

				<Button 
                    Tapped="OnAddBinderStep0_Tapped"
                    Width="{StaticResource LandscapeLargeItemWidth}"
					Height="{StaticResource LandscapeItemHeight}"
                    Style="{StaticResource ButtonLolloStyle}">
					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="{StaticResource LandscapeItemHeight_ForGrid}"/>
							<ColumnDefinition Width="{StaticResource GridSize4Placeholder_Medium}"/>
							<ColumnDefinition/>
						</Grid.ColumnDefinitions>

						<SymbolIcon Symbol="Add"/>
						<TextBlock Grid.Column="2" x:Uid="AddBinderT" 
							MaxWidth="{StaticResource LandscapeItemWidth}"
							TextWrapping="Wrap" 
							HorizontalAlignment="Left"/>
					</Grid>
				</Button>

				<Button 
                    Tapped="OnRestoreButton_Tapped"
                    Width="{StaticResource LandscapeLargeItemWidth}"
					Height="{StaticResource LandscapeItemHeight}"
                    Style="{StaticResource ButtonLolloStyle}">
					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="{StaticResource LandscapeItemHeight_ForGrid}"/>
							<ColumnDefinition Width="{StaticResource GridSize4Placeholder_Medium}"/>
							<ColumnDefinition/>
						</Grid.ColumnDefinitions>

						<SymbolIcon Symbol="OpenFile"/>
						<TextBlock Grid.Column="2" x:Uid="RestoreBinder" 
							MaxWidth="{StaticResource LandscapeItemWidth}"
							TextWrapping="Wrap" 
							HorizontalAlignment="Left"/>
					</Grid>
				</Button>

				<Button 
                    Tapped="OnSettingsButton_Tapped"
                    Width="{StaticResource LandscapeLargeItemWidth}"
					Height="{StaticResource LandscapeItemHeight}"
                    Style="{StaticResource ButtonLolloStyle}">
					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="{StaticResource LandscapeItemHeight_ForGrid}"/>
							<ColumnDefinition Width="{StaticResource GridSize4Placeholder_Medium}"/>
							<ColumnDefinition/>
						</Grid.ColumnDefinitions>

						<SymbolIcon Symbol="Setting"/>
						<TextBlock Grid.Column="2" x:Uid="Settings1" 
							MaxWidth="{StaticResource LandscapeItemWidth}"
							TextWrapping="Wrap" 
							HorizontalAlignment="Left"/>
					</Grid>
				</Button>

				<!--<Button 
                    Tapped="OnBackButton_Tapped"
                    Width="{StaticResource LandscapeLargeItemWidth}"
					Height="{StaticResource LandscapeItemHeight}"
                    Style="{StaticResource ButtonLolloStyle}">
					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="{StaticResource LandscapeItemHeight_ForGrid}"/>
							<ColumnDefinition Width="{StaticResource GridSize4Placeholder_Medium}"/>
							<ColumnDefinition/>
						</Grid.ColumnDefinitions>

						<SymbolIcon Symbol="Back"/>
						<TextBlock Grid.Column="2" x:Uid="Back" 
							MaxWidth="{StaticResource LandscapeItemWidth}"
							TextWrapping="Wrap" 
							HorizontalAlignment="Left"/>
					</Grid>
				</Button>-->

			</VariableSizedWrapGrid>

			<!-- fields to add new binder -->
			<Grid Grid.Row="1"
				Visibility="{Binding IsNewDbNameVisible, Converter={StaticResource BooleanToVisibleConverter}, Mode=OneWay}">
				<Grid.RowDefinitions>
					<RowDefinition/>
					<RowDefinition/>
				</Grid.RowDefinitions>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="Auto"/>
					<ColumnDefinition Width="Auto"/>
				</Grid.ColumnDefinitions>
				<ctl:LolloTextBox Text="{Binding NewDbName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
					Style="{StaticResource LolloTextBoxStyle}"
					Height="{StaticResource LandscapeItemHeight}"
					Width="{StaticResource LandscapeLargeItemWidth}"
					VerticalAlignment="Center"/>
				<TextBlock Grid.Row="1"
					x:Uid="NameAlreadyInUse"
					TextWrapping="Wrap"
					HorizontalAlignment="Left"
					Foreground="{StaticResource FlashyForeground}"
					MaxWidth="{StaticResource LandscapeLargeItemWidth}"
					Visibility="{Binding IsNewDbNameErrorMessageVisible, Converter={StaticResource BooleanToVisibleConverter}, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
				<AppBarButton Grid.Column="1" Icon="Go"
					Tapped="OnAddBinderStep1_Tapped"
					Height="{StaticResource LandscapeItemHeight}"
					Width="{StaticResource LandscapeItemHeight}"
					VerticalAlignment="Center"
					IsEnabled="{Binding IsNewDbNameErrorMessageVisible, Converter={StaticResource TrueToFalseConverter}, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
					Visibility="{Binding NewDbName, Converter={StaticResource TextEmptyToCollapsedConverter}, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
			</Grid>

			<!-- "all binders" header -->
			<Grid Grid.Row="2">
				<Border
					Style="{StaticResource BorderLolloStyle}"
					MinWidth="{StaticResource LandscapeItemWidth}"
					MinHeight="{StaticResource LandscapeItemHeight}"/>

				<TextBlock
					MaxWidth="{StaticResource LandscapeItemWidth}"
					MaxHeight="{StaticResource LandscapeItemHeight}"
					HorizontalAlignment="Center"
					VerticalAlignment="Center"
					TextAlignment="Center"
					Foreground="{ThemeResource SystemControlHighlightAltChromeWhiteBrush}"
                    x:Uid="AllBinders" 
                    TextWrapping="Wrap" ScrollViewer.VerticalScrollBarVisibility="Disabled"/>
			</Grid>

			<!-- all binder miniatures -->
			<ctl:TolerantListView Grid.Row="3"
                ItemsSource="{Binding Briefcase.DbNames}"
                IsItemClickEnabled="True"
                IsMultiSelectCheckBoxEnabled="False"
                ItemClick="OnFolderPreviews_ItemClick"
                ScrollViewer.VerticalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollMode="Disabled">
				<ItemsControl.ItemsPanel>
					<ItemsPanelTemplate>
						<ItemsWrapGrid Orientation="Horizontal"/>
					</ItemsPanelTemplate>
				</ItemsControl.ItemsPanel>
				<ItemsControl.ItemTemplate>
					<DataTemplate>
						<Grid>
							<Grid.RowDefinitions>
								<RowDefinition Height="{StaticResource MiniatureHeight_ForGrid}"/>
							</Grid.RowDefinitions>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="{StaticResource MiniatureWidth_ForGrid}"/>
							</Grid.ColumnDefinitions>

							<Viewbox Canvas.ZIndex="200"
                                Stretch="Uniform" StretchDirection="DownOnly"
                                VerticalAlignment="Bottom" HorizontalAlignment="Center"
                                MaxHeight="{StaticResource MiniatureQuarterHeight}">
								<TextBlock
                                    Text="{Binding}"
                                    Foreground="{StaticResource FlashyForeground}" 
                                    HorizontalAlignment="Stretch"
                                    TextWrapping="Wrap"
                                    MaxWidth="{StaticResource MiniatureWidth}"/>
							</Viewbox>

							<Border Height="{StaticResource MiniatureHeight}"
								Width="{StaticResource MiniatureWidth}"
								Background="{ThemeResource SystemControlBackgroundBaseLowBrush}"/>

							<AppBarButton Icon="Save"
									Tapped="OnBackupButton_Tapped"
									Canvas.ZIndex="150"
									Style="{StaticResource AppBarButtonRecoloured}"
									IsCompact="True"
									Foreground="{StaticResource FlashyForeground}"
									Opacity="1"
									HorizontalAlignment="Left" VerticalAlignment="Top"/>

							<AppBarButton Icon="Delete"
									Tapped="OnDeleteButton_Tapped"
									Canvas.ZIndex="150"
									Style="{StaticResource AppBarButtonRecoloured}"
									IsCompact="True"
									Foreground="{StaticResource FlashyForeground}"
									Opacity="1"
									HorizontalAlignment="Right" VerticalAlignment="Top"/>
						</Grid>
					</DataTemplate>
				</ItemsControl.ItemTemplate>
			</ctl:TolerantListView>

		</Grid>
	</ScrollViewer>
</ctl:ObservableControl>
